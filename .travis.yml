script:
- echo "This is Daves Mondo module 9 work again"
- echo "---------------------------------"
- FLASK_APP=todo_app/app
- FLASK_ENV=development
- docker build --target test --tag todoapptest .
- docker run -p 5000:5000 todoapptest
- docker build --target production -f Dockerfile --tag $DOCKERHUB_USERNAME/todoapp
  .
- echo $dockerhub_password | docker login --username $DOCKERHUB_USERNAME --password-stdin
- echo "Now for the push"
- echo "-------------------"
- docker push $DOCKERHUB_USERNAME/todoapp
- docker pull britboy4321/todoapp
- docker tag britboy4321/todoapp registry.heroku.com/todoappbritboy/web
- docker login --username=drawlinson48@gmail.com --password=$Heroku_finalpass2 registry.heroku.com
- docker push registry.heroku.com/todoappbritboy/web
- echo "CONTINUOUS DEPLOYMENT SETUP COMPLETED NOW"
- echo "-----------------------------------------"
- echo "TIME FOR ACTUAL DEPLOY and RELEASE NOW"
- echo "--------------------------------------"
deploy:
  provider: script
  script: heroku container:release web --app todoappbritboy
  on:
    branch: module9
  api_key:
    secure: ij5J142VkpaO+SiaSFE5fOpkfvBWvQsqWB1Wfs2Hj87knMvbpKLM980IOxY0t92C71eH/pnvcUK9aovZeuutacOVFBWc2xW/LLM5GpptyQluaMg6w/Vit90HdgivwxUT38Ktah08zhT0U6o77bii7pMLS6smYpb5/nuOFEzrXokqV/XUj361pUC8GEZ9y9xLcpTCb8SE4O4g78PUHPemmbDZpbk8nFocdtFfwQFDj7NC/wYqDi2rubQotdzL6KYDPMpqlToKYuMaOuonPAZRTEfHbN+V78qyk0bqYgrfUrQNyF3DTtZ6O/Szxlli1xYAybrKJ7/RmMPurSkDmiL+Z2wt84Up1BVXQBl4lWy9XXtf2nqA61WC8pk/cRdwBHKgjPhdVnG685zUzBHM5FaMdUHFZCx/eo0bJlygG5d3aqCFtPFCZ7Yalcyc/XjC66R84AvRyXx1js9euSLOprIduR0O1IH2oELqDXz557ltZh8Y4D/L/mljsvTSw3F22aen9uaXbyoyokq7cBMnCyhB82O7bRw7VhIYJbvSR2vrKf3/uay8aS+tbJP+rtaUz4Ji1YQ6NsT+PfZAGGyaXLa8o0MvLUgLvD2RR6AevNZC8WPkUqgxLQDDIz5AR6YbsMFUoI8sVFjjIL9GRkcaZeBxLAvGED3UtUIEs/6KY0J/T9A=
