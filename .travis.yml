script:
- echo "This is Daves Mondo module 9 work"
- echo "---------------------------------"
- FLASK_APP=todo_app/app
- FLASK_ENV=development
- docker build --target test --tag todoapptest .
- docker run -p 5000:5000 todoapptest
- docker build --target production -f Dockerfile --tag $DOCKERHUB_USERNAME/todoapp
  .
- echo $dockerhub_password | docker login --username $DOCKERHUB_USERNAME --password-stdin
- echo "Now for the push"
- echo "-------------------"
- docker push $DOCKERHUB_USERNAME/todoapp
- docker pull britboy4321/todoapp
- docker tag britboy4321/todoapp registry.heroku.com/todoappbritboy/web
- docker login --username=drawlinson48@gmail.com --password=$Heroku_finalpass2 registry.heroku.com
- docker push registry.heroku.com/todoappbritboy/web
- echo "CONTINUOUS DEPLOYMENT SETUP COMPLETED NOW"
- echo "-----------------------------------------"
- echo "TIME FOR ACTUAL DEPLOY and RELEASE NOW"
- echo "--------------------------------------"
deploy:
  provider: script
  script: heroku container:release web --app todoappbritboy
  on:
    branch: module9
  api_key:
    secure: Z8+1ZQ1zjZTMBilqdm3fDfvk4r2+J3nYmvdS/oXAUri0vCcJHTQNEHO7u3Jr3c3nTup8NR4Qqq3POe647Xf+WNTC35RzVc59EWINSQprrhFxcIq80jKxY38RKiYtnmSPpA++iymRa6QX06ZTAGXvmH458dZR5C8yJozD2GGXqAEBUvVQdEIwYY/2rbXrcfRS6pDj39KsIt/6+hx0CLpaA0sjzwveFq2XF/bIl3E+iPiRC2irTAkzVjaR9CpTfJLdDsZJHfrQDDh1me+XmwuXqwx3AoJgQ08zh9/WTU2xfLXcMI0BFs2EG5ymEpDbX0KblPRUZfUbKOzWaPFy+47yC9AVpxediRcMJTxM+Kv3/iLIYEhRPQU4iMM0hhqz4B49nFYKgG5jEPezLNByklB7fU/S2SzRalSP+bqejx4aD1Hgt+e+ujIIB1lBQKuG2dtIWt8rJEpGXZLLnfOMgS5TJYQv1OBEO6RkPfHyG5tUl24CC/IKlgkozHKTXLznPbxMIjyDABeflQpvMY7ATtLcoBQR2A8DYR3qbMZyx25lZd6nx448oMDl+JpglTxtn9blZmQzGH1yaKiB/VCIGvtzxBWNAw7V/CZK2kJxpYRCzIVjVeC+2zWkPE5xig+AeluR/j4E14w4RbWKFGlnyQSBYjYS1/Qb2sDYxl47V+ZgaJk=
