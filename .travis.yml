script:
- echo "This is Daves Mondo module 9 work again"
- echo "---------------------------------"
- FLASK_APP=todo_app/app
- FLASK_ENV=development
- docker build --target test --tag todoapptest .
- docker run -p 5000:5000 todoapptest
- docker build --target production -f Dockerfile --tag $DOCKERHUB_USERNAME/todoapp
  .
- echo $dockerhub_password | docker login --username $DOCKERHUB_USERNAME --password-stdin
- echo "Now for the push"
- echo "-------------------"
- docker push $DOCKERHUB_USERNAME/todoapp
- docker pull britboy4321/todoapp
- docker tag britboy4321/todoapp registry.heroku.com/todoappbritboy/web
- docker login --username=drawlinson48@gmail.com --password=$Heroku_finalpass2 registry.heroku.com
- docker push registry.heroku.com/todoappbritboy/web
- echo "CONTINUOUS DEPLOYMENT SETUP COMPLETED NOW"
- echo "-----------------------------------------"
- echo "TIME FOR ACTUAL DEPLOY and RELEASE NOW"
- echo "--------------------------------------"
deploy:
  provider: script
  script: heroku container:release web --app todoappbritboy
  on:
    branch: module9
  api_key:
    secure: d/6hdglYkMsRa+OKO8gZAWZS8QzwMZnXa35BdtYiwwnq4w943h20gRpd1kVsK49OTQhKOe6zy4X7jYXi8qpxkZPeRVXjc5o4TIqDJOhgTuTxP8i0sNFFm+FtlNZJvWhOrV+cFOMgvPgC2w6KGxK4a/XVCfkOPm2ZKt6Wb20jUxaufNC47nJRKTuuZGni3mBJ0A17KnfqerF4ef6Y/K8CypAajOz9AMXnuu8VFbe3eK3Uk4EyEPqx3Z3vTNuRz6MLE55HGf2NLqVs9zSt9xn8YGFJDgR1CxuXTM9BCIzEdeQrVgzCdCde/ePI0vPWrhMwIkn/Wu+D8QVO/TE9Vr//5FBESATmGBC4N4jqRewLfriIM7tUQvvuj8gbCYU901SkjTkoYxwMSN4AO99T1SWJVeOz+gObozGdNzcBRXZZ5SpSvYJqwIU8HOkDn2SJokzpWd0Qhnvffyw3axcU/2ijhNVpTwdzTQRifrtvk8J6vZkRjoA8F18pKprVgVgDERWuiPBEnbmxtPeLwOlKID7V4FuUFA0vyx0DNCOgCAB4Vba0sk/HyLTPoRu9/ldQrYvEIkamuGEKC/EnJRkx5g/o13ndfVIu4p3p7hx+ZvQ8/zmHlK7zZsC2sRjpNbCTU8pcME0FWBeE5N4Rw8Jo5Wzu0i28e7agg6G8PxDOuZXbIpw=
